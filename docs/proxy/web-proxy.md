---
title: 反向代理服务器的安装配置
editLink: true
description: 反向代理服务器的安装配置文档
layout: doc
head:
    - - meta
      - name: keywords
        content: Nginx, Proxy
outline: deep
prev:
  text:
  link:
next:
  text:
  link:
---

# 反向代理服务器的安装配置

反向代理服务器位于应用服务器的上游，主要将内部服务进行代理从而不暴露真实的业务端口并根据域名和路由来处理外部流量，具体负责处理的内容如下所示：

- SSL 证书卸载
- 金丝雀发布
- 负载均衡
- 访问控制
- 动静分离

并且，通过与 Lua 和 Redis 结合，可以实现更多更强大的功能： <Badge type="tip" text="持续更新" />

- 动态黑名单
- 高性能缓存

对于端口转发等正向代理服务器用途，会在后续知识库中具体描述，这里不做过多描述。

> [!TIP]
> [OpenResty](https://openresty.org/cn/) 集成了 Nginx 和大量的 Lua 模块，如果不想使用第三方软件，可以使用官方 Nginx 并根据需要自行添加所需的 Lua 模块

还有一些其他的具体应用配置如下：

- 连接数限制
- 防盗链配置
- 跨域配置
- 文件上传限制
  - 限制上传文件大小
  - 限制上传文件权限
- 防止 SQL 注入
- 防止目录遍历

同时，对于生产环境和测试环境还有部分不一样，具体部分如下：

- 缓存时间配置
- 高可用配置

## Nginx 的安装配置

### Nginx 的安装

由于两台代理服务器是作为高可用使用的，逻辑意义上相当于一台服务器，故安装和配置是完全一样的，这里只描述其中一台的操作，对于两台之间的不同之处会重点指出，除此之外，没有任何的不同操作。

当然，对于只有一台代理服务器的情况下，配置高可用是没有任何意义的。

### Nginx 的配置

这里的 Nginx 配置是作为代理服务器使用的且默认前面没有硬件高可用服务器使用的情况下的配置，具体的网络流量拓扑如下所示：